<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Docker笔记总结 | 任求其</title><meta name="description" content="整理总结一下Docker的有关知识点"><meta name="keywords" content="Docker"><meta name="author" content="Willis"><meta name="copyright" content="Willis"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://williscode.gitee.io/posts/8bff.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Docker笔记总结"><meta property="og:url" content="https://williscode.gitee.io/posts/8bff.html"><meta property="og:site_name" content="任求其"><meta property="og:description" content="整理总结一下Docker的有关知识点"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/GEM_13.jpg"><meta property="article:published_time" content="2020-12-20T15:31:12.000Z"><meta property="article:modified_time" content="2020-12-22T13:29:25.726Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '4.2.1',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime: '天',
  date_suffix: {"one_hour":"刚刚","hours":"小时前","day":"天前"},
  copyright: {"limitCount":50,"languages":{"author":"作者: Willis","link":"链接: ","source":"来源: 任求其","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-22 21:29:25'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }
    
    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }
    
   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}
    
    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}
    
   
    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>
 <div id="loading-container">
     <p class="loading-text">玩命加载中 . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">24</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-简介"><span class="toc-number">1.</span> <span class="toc-text">Docker 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#环境配置的难题"><span class="toc-number">1.1.</span> <span class="toc-text">环境配置的难题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#虚拟机"><span class="toc-number">1.2.</span> <span class="toc-text">虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-的前生——Linux容器（容器虚拟化技术）"><span class="toc-number">1.3.</span> <span class="toc-text">Docker 的前生——Linux容器（容器虚拟化技术）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是-Docker"><span class="toc-number">1.4.</span> <span class="toc-text">什么是 Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-与-Linux-容器的关系"><span class="toc-number">1.5.</span> <span class="toc-text">Docker 与 Linux 容器的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么-Docker-越来越受欢迎"><span class="toc-number">1.6.</span> <span class="toc-text">为什么 Docker 越来越受欢迎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-的用途"><span class="toc-number">1.7.</span> <span class="toc-text">Docker 的用途</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-改变了什么"><span class="toc-number">1.8.</span> <span class="toc-text">Docker 改变了什么</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-架构"><span class="toc-number">2.</span> <span class="toc-text">Docker 架构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-引擎"><span class="toc-number">2.1.</span> <span class="toc-text">Docker 引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-架构-1"><span class="toc-number">2.2.</span> <span class="toc-text">Docker 架构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-简单使用"><span class="toc-number">3.</span> <span class="toc-text">Docker 简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu下安装-Docker"><span class="toc-number">3.1.</span> <span class="toc-text">Ubuntu下安装 Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载旧版本"><span class="toc-number">3.1.1.</span> <span class="toc-text">卸载旧版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-apt-安装"><span class="toc-number">3.1.2.</span> <span class="toc-text">使用 apt 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用脚本自动安装"><span class="toc-number">3.1.3.</span> <span class="toc-text">使用脚本自动安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动-Docker"><span class="toc-number">3.1.4.</span> <span class="toc-text">启动 Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装完Docker后，守护进程启动，检查Docker是否正在运行"><span class="toc-number">3.1.5.</span> <span class="toc-text">安装完Docker后，守护进程启动，检查Docker是否正在运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建立-docker-用户组"><span class="toc-number">3.1.6.</span> <span class="toc-text">建立 docker 用户组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#永远滴神——HelloWord"><span class="toc-number">3.1.7.</span> <span class="toc-text">永远滴神——HelloWord</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#镜像加速"><span class="toc-number">3.1.8.</span> <span class="toc-text">镜像加速</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其余各类操作系统安装-Docker-官方文档"><span class="toc-number">3.1.9.</span> <span class="toc-text">其余各类操作系统安装 Docker 官方文档</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考链接"><span class="toc-number">4.</span> <span class="toc-text">参考链接</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文档"><span class="toc-number">4.1.</span> <span class="toc-text">参考文档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu国内镜像源"><span class="toc-number">4.2.</span> <span class="toc-text">Ubuntu国内镜像源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#阿里云源"><span class="toc-number">4.2.1.</span> <span class="toc-text">阿里云源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#清华源"><span class="toc-number">4.2.2.</span> <span class="toc-text">清华源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#中科大源"><span class="toc-number">4.2.3.</span> <span class="toc-text">中科大源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网易163源"><span class="toc-number">4.2.4.</span> <span class="toc-text">网易163源</span></a></li></ol></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/GEM_13.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">任求其</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Docker笔记总结</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-20T15:31:12.000Z" title="发表于 2020-12-20 23:31:12">2020-12-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-22T13:29:25.726Z" title="更新于 2020-12-22 21:29:25">2020-12-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><strong>Docker</strong>，什么是<strong>Docker</strong>？</p>
<p>引用官方文档的概述：</p>
<ul>
<li><strong>Docker</strong>是一个用于开发，发布和运行应用程序的开放平台。<strong>Docker</strong>使您能够将应用程序与基础架构分开，从而可以快速交付软件。借助<strong>Docker</strong>，您可以以与管理应用程序相同的方式来管理基础架构。通过利用<strong>Docker</strong>的方法来快速交付，测试和部署代码，您可以大大减少编写代码和在生产环境中运行代码之间的延迟。</li>
</ul>
<p>我打算分三个部分完成这篇文章：</p>
<ol>
<li><strong>Docker</strong> 简介</li>
<li><strong>Docker</strong> 架构</li>
<li><strong>Docker</strong> 简单使用</li>
</ol>
<h1 id="Docker-简介"><a href="#Docker-简介" class="headerlink" title="Docker 简介"></a>Docker 简介</h1><h2 id="环境配置的难题"><a href="#环境配置的难题" class="headerlink" title="环境配置的难题"></a>环境配置的难题</h2><p>环境配置是最最麻烦的事情，一台电脑必须保证：操作系统的正确设置、各种库和组件的正确安装，只有做到这两点，软件才可以运行起来。从事软件开发行业的人员，拿到一个新电脑，最开始做的就是配置环境，例如：<strong>Java</strong>开发人员配置<strong>Java</strong>环境（如<strong>JDK</strong>、<strong>Tocmat</strong>服务器等等）。</p>
<p>一个软件的无到有、再到正式上线，不单单只有开发，还有后期的软件测试、软件运行和维护。</p>
<p>开发人员、测试人员、运维人员的电脑环境配置有可能是不同的，这也是导致一个软件在开发人员的电脑可以跑起来，而在测试人员的电脑中运行不起来。如果某些老旧的模块与当前的环境不兼容，那就更麻烦了。</p>
<p>环境配置如此麻烦，换一台机器，就要重来一次，旷日费时。很多人想到，能不能从根本上解决问题，软件可以带环境安装？也就是说，安装的时候，把原始环境一模一样地复制过来。</p>
<h2 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h2><p>虚拟机是带环境安装的一种解决方案。</p>
<p>虚拟机可以在一种操作系统里面运行另一种操作系统，比如在<strong>Window 10</strong>系统里面运行<strong>Linux</strong>系统（微软为了拥抱<strong>Linux</strong>而推出的<strong>WSL</strong>，目前是<strong>WSL2</strong>版本），或者是利用虚拟机软件<strong>VMware Workstation</strong>，在这个软件中安装别的系统。</p>
<p>使用<strong>VMware Workstation</strong>或者是<strong>WSL</strong>（<strong>VMware Workstation</strong>安装操作系统后可以有图形化界面，<strong>WSL</strong>我则利用<strong>VS code</strong>来使用，<strong>WSL</strong>也可以使用图形化界面，但利用<strong>VS code</strong>会更加方便），就跟使用一台全新的操作系统电脑一般，与真实系统一模一样，无论在虚拟机中怎么使用，都不会影响到外面的这个主操作系统，因为对于这个主操作系统而言，无论是<strong>VMware Workstation</strong>也好，或是<strong>WSL</strong>也好，都只是一个普通文件夹，不需要了可以删掉，对于其他部分是没有任何影响的。</p>
<p>虽然用户可以通过虚拟机还原软件的原始环境，但是，这个方案有几个缺点：</p>
<ol>
<li><p>资源占用过多</p>
<p>虚拟机会独占一部分内存和硬盘空间。它运行的时候，其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有 1MB，虚拟机依然需要几百 MB 的内存才能运行。</p>
</li>
<li><p>冗余步骤多</p>
<p>虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录。</p>
</li>
<li><p>启动慢</p>
<p>启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行。</p>
</li>
</ol>
<h2 id="Docker-的前生——Linux容器（容器虚拟化技术）"><a href="#Docker-的前生——Linux容器（容器虚拟化技术）" class="headerlink" title="Docker 的前生——Linux容器（容器虚拟化技术）"></a>Docker 的前生——Linux容器（容器虚拟化技术）</h2><p>由于虚拟机存在以上三个缺点，<strong>Linux</strong>发展出了另一种虚拟化技术：<strong>Linux</strong>容器（<strong>Linux Containers</strong>，缩写为 <strong>LXC</strong>）。</p>
<p>与虚拟机不同，<strong>Linux容器不是模拟一个完整的操作系统，而是对进程进行隔离</strong>，或者换一种说法，在正常进程的外面套上一个保护套，对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现与底层操作系统的隔离。</p>
<p>由于容器是进程级别的，相比于虚拟机有许多优势：</p>
<ol>
<li><p>启动快</p>
<p>容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多。</p>
</li>
<li><p>资源占用少</p>
<p>容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源。</p>
</li>
<li><p>体积小</p>
<p>容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多。</p>
</li>
</ol>
<p>总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多。</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>容器</th>
<th>虚拟机</th>
</tr>
</thead>
<tbody><tr>
<td>启动</td>
<td>秒级</td>
<td>分钟级</td>
</tr>
<tr>
<td>硬盘使用</td>
<td>一般为 <strong>MB</strong></td>
<td>一般为 <strong>GB</strong></td>
</tr>
<tr>
<td>性能</td>
<td>接近原生</td>
<td>弱于</td>
</tr>
<tr>
<td>系统支持量</td>
<td>单机支持上千个容器</td>
<td>一般几十个</td>
</tr>
</tbody></table>
<h2 id="什么是-Docker"><a href="#什么是-Docker" class="headerlink" title="什么是 Docker"></a>什么是 Docker</h2><p><strong>Docker</strong>是一个用于开发，发布和运行应用程序的开放平台。<strong>Docker</strong>使您能够将应用程序与基础架构分开，从而可以快速交付软件。借助<strong>Docker</strong>，您可以以与管理应用程序相同的方式来管理基础架构。通过利用<strong>Docker</strong>的方法来快速交付，测试和部署代码，您可以大大减少编写代码和在生产环境中运行代码之间的延迟。（引自于官方文档）</p>
<p>用简单的话来说，<strong>Docker</strong>可以让开发者打包他们的应用以及各种依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的操作系统中，也可以实现虚拟化。</p>
<p><strong>Docker属于Linux容器的一种封装，提供简单简易的容器使用接口。</strong>它是目前最流行的 <strong>Linux</strong>容器解决方案。</p>
<p><strong>Docker</strong> 将应用程序与该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。有了 <strong>Docker</strong>，就不用担心环境问题。</p>
<p>总体来说，<strong>Docker</strong> 的接口相当简单，用户可以方便地创建和使用容器，把自己的应用放入容器。容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样。</p>
<h2 id="Docker-与-Linux-容器的关系"><a href="#Docker-与-Linux-容器的关系" class="headerlink" title="Docker 与 Linux 容器的关系"></a>Docker 与 Linux 容器的关系</h2><p><strong>Docker</strong>并不是<strong>Linux</strong>容器的替代品，<strong>Docker</strong>底层使用<strong>Linux</strong>容器来实现，<strong>Linux</strong>容器将<strong>Linux</strong>进程沙盒化，使得进程之间相互隔离。在<strong>Linux</strong>容器的基础上，<strong>Docker</strong>提供了一系列更加强大的功能。可以理解为<strong>Docker</strong>是<strong>Linux</strong>容器的升级版。</p>
<h2 id="为什么-Docker-越来越受欢迎"><a href="#为什么-Docker-越来越受欢迎" class="headerlink" title="为什么 Docker 越来越受欢迎"></a>为什么 Docker 越来越受欢迎</h2><p><strong>一处构建、随处运行</strong></p>
<p>这是<strong>Docker</strong>最大的优点。</p>
<ol>
<li><p>更快速的应用交付和部署</p>
<p>传统的应用开发完成后，需要提供一堆安装程序和配置说明文档，安装部署后需根据配置文档进行繁杂的配置才可以正常运行。</p>
<p>使用<strong>Docker</strong>，只需要交付少量容器镜像文件，在正式生产环境加载镜像并运行即可，应用安装、环境配置等等应用运行的前提条件，都已经在镜像中内置好，大大节省部署配置和测试验证时间。</p>
</li>
<li><p>更便捷的升级和扩缩容</p>
<p>随着微服务架构和<strong>Docker</strong>的发展，大量的应用会通过微服务方式架构，应用的开发构建将变成搭乐高积木一样，每一个<strong>Docker</strong>容器就变成了一块积木，应用的升级会变得更加容易。</p>
<p>每次需要对某一个应用模块进行升级，可以通过镜像运行新的容器进行快速升级。</p>
</li>
<li><p>更简单的系统运维</p>
<p>应用容器化运行后，生产环境运行的应用可与开发、测试环境的应用高度一致，容器会将应用程序相关的环境和状态完全封装起来，不会因为底层基础架构和操作系统的不一致性给应用带来影响，产生新的<strong>BUG</strong>。</p>
<p>当出现程序异常时，也可以通过测试环境的相同容器进行快速定位和修复。</p>
</li>
<li><p>更高效的计算资源利用</p>
<p><strong>Docker</strong>是内核级虚拟化，其不像传统的虚拟化技术一样需要额外的<strong>Hypervisor</strong>支持，所以在一台物理机上可以运行多个容器实例，可大大提升物理服务器的<strong>CPU</strong>和内存的利用率。</p>
</li>
</ol>
<h2 id="Docker-的用途"><a href="#Docker-的用途" class="headerlink" title="Docker 的用途"></a>Docker 的用途</h2><p>*<em>Docker *</em>的主要用途，目前有三大类：</p>
<ol>
<li><p><strong>提供一次性的环境</strong></p>
<p>比如：本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。</p>
</li>
<li><p><strong>提供弹性的云服务</strong></p>
<p>因为Docker容器可以随开随关，很适合动态扩容和缩容。</p>
</li>
<li><p><strong>组建微服务架构</strong></p>
<p>通过多个容器，一台机器可以跑多个服务，因此在本地机器就可以模拟出微服务架构。</p>
</li>
</ol>
<h2 id="Docker-改变了什么"><a href="#Docker-改变了什么" class="headerlink" title="Docker 改变了什么"></a>Docker 改变了什么</h2><ul>
<li>面向产品：产品交付</li>
<li>面向开发：简化环境配置</li>
<li>面向测试：多版本测试</li>
<li>面向运维：环境一致性</li>
<li>面向架构：自动化扩容（微服务）</li>
</ul>
<h1 id="Docker-架构"><a href="#Docker-架构" class="headerlink" title="Docker 架构"></a>Docker 架构</h1><h2 id="Docker-引擎"><a href="#Docker-引擎" class="headerlink" title="Docker 引擎"></a>Docker 引擎</h2><p><strong>Docker Engine</strong>是具有以下主要组件的客户端-服务器应用程序：</p>
<ul>
<li><p>服务器是一种长期运行的程序，称为守护程序进程（ <strong>dockerd</strong>命令）。</p>
</li>
<li><p>REST API，它指定程序可以用来与守护程序进行通信并指示其操作的接口。</p>
</li>
<li><p>命令行界面（<strong>CLI</strong>）客户端（<strong>docker</strong>命令）。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201220224351.png" alt="Docker引擎"></p>
<p><strong>CLI</strong>使用<strong>Docker REST API</strong>通过脚本或直接<strong>CLI</strong>命令来控制<strong>Docker</strong>守护程序或与<strong>Docker</strong>守护程序进行交互。许多其他<strong>Docker</strong>应用程序都使用基础<strong>API</strong>和<strong>CLI</strong>。</p>
<p>守护程序创建和管理<strong>Docker</strong>对象，例如图像，容器，网络和卷。</p>
<h2 id="Docker-架构-1"><a href="#Docker-架构-1" class="headerlink" title="Docker 架构"></a>Docker 架构</h2><p><strong>Docker</strong>使用客户端-服务器（<strong>C/S</strong>）架构模式。使用远程<strong>API</strong>来管理和创建<strong>Docker</strong>容器</p>
<p><strong>Docker</strong> 容器通过 <strong>Docker</strong> 镜像来创建。</p>
<p>容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<table>
<thead>
<tr>
<th>Docker</th>
<th>面向对象</th>
</tr>
</thead>
<tbody><tr>
<td>容器</td>
<td>对象</td>
</tr>
<tr>
<td>镜像</td>
<td>类</td>
</tr>
</tbody></table>
<p><strong>Docker</strong>客户端与<strong>Docker</strong>守护程序进行对话，该守护程序完成了构建，运行和分发<strong>Docker</strong>容器的繁重工作。</p>
<p><strong>Docker</strong>客户端和守护程序可以在同一系统上运行，或者可以将<strong>Docker</strong>客户端连接到远程<strong>Docker</strong>守护程序。</p>
<p><strong>Docker</strong>客户端和守护程序在<strong>UNIX</strong>套接字或网络接口上使用<strong>REST API</strong>进行通信。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201220224651.png" alt="Docker架构"></p>
<table>
<thead>
<tr>
<th>概念</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Docker</strong> 镜像（<strong>Images</strong>）</td>
<td align="left"><strong>Docker</strong> 镜像是用于创建 <strong>Docker</strong> 容器的模板，比如 <strong>Ubuntu</strong> 系统。</td>
</tr>
<tr>
<td><strong>Docker</strong> 容器(<strong>Container</strong>)</td>
<td align="left">容器是独立运行的一个或一组应用，是镜像运行时的实体</td>
</tr>
<tr>
<td><strong>Docker</strong> 客户端(<strong>Client</strong>)</td>
<td align="left"><strong>Docker</strong> 客户端通过命令行或者其他工具使用 <strong>Docker API</strong> (<a href="https://docs.docker.com/reference/api/docker_remote_api" target="_blank" rel="noopener">https://docs.docker.com/reference/api/docker_remote_api</a>) 与 <strong>Docker</strong> 的守护进程通信。</td>
</tr>
<tr>
<td><strong>Docker</strong>守护程序</td>
<td align="left"><strong>Docker</strong>守护程序（<strong>dockerd</strong>）侦听<strong>Docker API</strong>请求并管理<strong>Docker</strong>对象，例如图像，容器，网络和卷。守护程序还可以与其他守护程序通信以管理<strong>Docker</strong>服务。</td>
</tr>
<tr>
<td><strong>Docker</strong> 主机(<strong>Docker_Host</strong>)</td>
<td align="left">一个物理或者虚拟的机器用于执行 <strong>Docker</strong> 守护进程和容器。</td>
</tr>
<tr>
<td><strong>Docker</strong> 仓库(<strong>Registry</strong>)</td>
<td align="left"><strong>Docker</strong> 仓库用来保存镜像，可以理解为代码控制中的代码仓库。<br /><strong>Docker Hub</strong>(<a href="https://hub.docker.com" target="_blank" rel="noopener">https://hub.docker.com</a>) 提供了庞大的镜像集合供使用。</td>
</tr>
<tr>
<td><strong>Docker Machine</strong></td>
<td align="left"><strong>Docker Machine</strong>是一个简化<strong>Docker</strong>安装的命令行工具，通过一个简单的命令行即可在相应的平台上安装<strong>Docker</strong>，比如<strong>VirtualBox</strong>、 <strong>Digital Ocean</strong>、<strong>Microsoft Azure</strong>。</td>
</tr>
</tbody></table>
<h1 id="Docker-简单使用"><a href="#Docker-简单使用" class="headerlink" title="Docker 简单使用"></a>Docker 简单使用</h1><h2 id="Ubuntu下安装-Docker"><a href="#Ubuntu下安装-Docker" class="headerlink" title="Ubuntu下安装 Docker"></a>Ubuntu下安装 Docker</h2><h3 id="卸载旧版本"><a href="#卸载旧版本" class="headerlink" title="卸载旧版本"></a>卸载旧版本</h3><p>旧版本的 <strong>Docker</strong> 称为 <strong>docker</strong> 或者 <strong>docker-engine</strong>，使用以下命令卸载旧版本：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> remove docker \
               docker-engine \
               docker.io</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211131.png" alt="卸载Docker旧版本"></p>
<h3 id="使用-apt-安装"><a href="#使用-apt-安装" class="headerlink" title="使用 apt 安装"></a>使用 apt 安装</h3><p>由于 <strong>apt</strong> 源使用 <strong>HTTPS</strong> 以确保软件下载过程中不被篡改。因此，我们首先需要添加使用 <strong>HTTPS</strong> 传输的软件包以及 <strong>CA</strong> 证书。</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update

$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211242.png" alt=""></p>
<p>鉴于国内网络问题，强烈建议使用国内源，官方源请在注释中查看。</p>
<p>为了确认所下载软件包的合法性，需要添加软件源的 <strong>GPG</strong> 密钥。</p>
<pre class=" language-bash"><code class="language-bash">$ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add -
<span class="token comment" spellcheck="true">#PS:这里用的Ubuntu软件源是中科大的软件源，如果想切换软件源的文末有其他的软件源</span>

<span class="token comment" spellcheck="true"># 官方源</span>
<span class="token comment" spellcheck="true"># $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211405.png" alt=""></p>
<p>然后，我们需要向 <strong>sources.list</strong> 中添加 <strong>Docker</strong> 软件源</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> add-apt-repository \
    <span class="token string">"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \
    <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> \
    stable"</span>


<span class="token comment" spellcheck="true"># 官方源</span>
<span class="token comment" spellcheck="true"># $ sudo add-apt-repository \</span>
<span class="token comment" spellcheck="true">#    "deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="token comment" spellcheck="true">#    $(lsb_release -cs) \</span>
<span class="token comment" spellcheck="true">#    stable"</span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211459.png" alt=""></p>
<p>更新 <strong>apt</strong> 软件包缓存，并安装 <strong>docker-ce</strong>：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update

$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211555.png" alt=""></p>
<h3 id="使用脚本自动安装"><a href="#使用脚本自动安装" class="headerlink" title="使用脚本自动安装"></a>使用脚本自动安装</h3><pre class=" language-bash"><code class="language-bash">curl -fsSL https://get.docker.com <span class="token operator">|</span> <span class="token function">bash</span> -s docker --mirror Aliyun</code></pre>
<h3 id="启动-Docker"><a href="#启动-Docker" class="headerlink" title="启动 Docker"></a>启动 Docker</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> systemctl <span class="token function">enable</span> docker
$ <span class="token function">sudo</span> systemctl start docker</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211726.png" alt=""></p>
<h3 id="安装完Docker后，守护进程启动，检查Docker是否正在运行"><a href="#安装完Docker后，守护进程启动，检查Docker是否正在运行" class="headerlink" title="安装完Docker后，守护进程启动，检查Docker是否正在运行"></a>安装完Docker后，守护进程启动，检查Docker是否正在运行</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> systemctl status docker
<span class="token comment" spellcheck="true">#终端出现如下图的信息，表明该服务处于活动状态并正在运行</span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211826.png" alt=""></p>
<h3 id="建立-docker-用户组"><a href="#建立-docker-用户组" class="headerlink" title="建立 docker 用户组"></a>建立 docker 用户组</h3><p>默认情况下，<strong>docker</strong> 命令会使用 <strong>Unix socket</strong> 与 <strong>Docker</strong> 引擎通讯。而只有 <strong>root</strong> 用户和 <strong>docker</strong> 组的用户才可以访问 <strong>Docker</strong> 引擎的 <strong>Unix socket</strong>。出于安全考虑，一般 <strong>Linux</strong> 系统上不会直接使用 <strong>root</strong> 用户。因此，更好地做法是将需要使用 <strong>docker</strong> 的用户加入 <strong>docker</strong> 用户组。</p>
<p>建立 <strong>docker</strong> 组：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">groupadd</span> docker</code></pre>
<p>将当前用户加入 <strong>docker</strong> 组：</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token variable">$USER</span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222211949.png" alt=""></p>
<p>退出当前终端并重新登录，进行如下测试。</p>
<h3 id="永远滴神——HelloWord"><a href="#永远滴神——HelloWord" class="headerlink" title="永远滴神——HelloWord"></a>永远滴神——HelloWord</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#先拉取hello-world镜像</span>
$ <span class="token function">sudo</span> docker pull hello-world
<span class="token comment" spellcheck="true">#再运行hello-world镜像</span>
$ <span class="token function">sudo</span> docker run hello-world</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222212108.png" alt=""></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#查看hello-world的镜像</span>
$ <span class="token function">sudo</span> docker images</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222212226.png" alt=""></p>
<h3 id="镜像加速"><a href="#镜像加速" class="headerlink" title="镜像加速"></a>镜像加速</h3><p>国内从 DockerHub 拉取镜像有时会遇到困难，此时可以配置镜像加速器。Docker 官方和国内很多云服务商都提供了国内加速器服务，例如：</p>
<blockquote>
<ul>
<li>网易：<a href="https://hub-mirror.c.163.com/" target="_blank" rel="noopener">https://hub-mirror.c.163.com/</a></li>
<li>阿里云：https://&lt;你的ID&gt;.mirror.aliyuncs.com</li>
<li>七牛云加速器：<a href="https://reg-mirror.qiniu.com" target="_blank" rel="noopener">https://reg-mirror.qiniu.com</a></li>
</ul>
</blockquote>
<p>我这里以网易的为例说一说如何进行配置</p>
<p>目前主流 <strong>Linux</strong> 发行版均已使用 <strong>systemd</strong> 进行服务管理，这里介绍如何在使用 <strong>systemd</strong> 的 <strong>Linux</strong> 发行版中配置镜像加速器。</p>
<p>请首先执行以下命令，查看是否在 <strong>docker.service</strong> 文件中配置过镜像地址。</p>
<pre class=" language-bash"><code class="language-bash">$ systemctl <span class="token function">cat</span> docker <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'\-\-registry\-mirror'</span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222212332.png" alt=""></p>
<p>如果该命令有输出，那么请执行 <code>$ systemctl cat docker</code> 查看 <code>ExecStart=</code> 出现的位置，修改对应的文件内容去掉 <code>--registry-mirror</code> 参数及其值，并按接下来的步骤进行配置。</p>
<p>如果以上命令没有任何输出，像我的一样，那么就可以在 <code>/etc/docker/daemon.json</code> 中写入如下内容（如果文件不存在请新建该文件）：</p>
<pre class=" language-bash"><code class="language-bash"><span class="token punctuation">{</span>
  <span class="token string">"registry-mirrors"</span><span class="token keyword">:</span> <span class="token punctuation">[</span>
    <span class="token string">"https://hub-mirror.c.163.com"</span>,
    <span class="token string">"https://mirror.baidubce.com"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>==注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动。==</p>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222212427.png" alt=""></p>
<p>之后重新启动服务。</p>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> systemctl daemon-reload
$ <span class="token function">sudo</span> systemctl restart docker</code></pre>
<p>检查加速器是否生效：</p>
<p>执行 <code>$ docker info</code>，如果从结果中看到了如下内容，说明配置成功。</p>
<pre class=" language-bash"><code class="language-bash">Registry Mirrors:
 https://hub-mirror.c.163.com/</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201222212543.png" alt=""></p>
<h3 id="其余各类操作系统安装-Docker-官方文档"><a href="#其余各类操作系统安装-Docker-官方文档" class="headerlink" title="其余各类操作系统安装 Docker 官方文档"></a>其余各类操作系统安装 Docker 官方文档</h3><blockquote>
<ul>
<li><a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">Mac</a></li>
<li><a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">Windows</a></li>
<li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener">Ubuntu</a></li>
<li><a href="https://docs.docker.com/engine/install/debian/" target="_blank" rel="noopener">Debian</a></li>
<li><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">CentOS</a></li>
<li><a href="https://docs.docker.com/engine/install/fedora/" target="_blank" rel="noopener">Fedora</a></li>
<li><a href="https://docs.docker.com/engine/install/binaries/" target="_blank" rel="noopener">其他 Linux 发行版</a></li>
</ul>
</blockquote>
<p>1.7 容器在内核中支持两种重要技术</p>
<p>namespaces——名称空间</p>
<p>control group——控制组</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>官方文档：<a href="https://docs.docker.com/get-started/overview/" target="_blank" rel="noopener">https://docs.docker.com/get-started/overview/</a></p>
<p>博客：<a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></p>
<p>​            <a href="https://docker_practice.gitee.io/zh-cn/" target="_blank" rel="noopener">https://docker_practice.gitee.io/zh-cn/</a></p>
<p>知乎：<a href="https://zhuanlan.zhihu.com/p/89587030" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/89587030</a></p>
<p>W3Cschool：<a href="https://www.w3cschool.cn/docker/docker-tutorial.html" target="_blank" rel="noopener">https://www.w3cschool.cn/docker/docker-tutorial.html</a></p>
<h2 id="Ubuntu国内镜像源"><a href="#Ubuntu国内镜像源" class="headerlink" title="Ubuntu国内镜像源"></a>Ubuntu国内镜像源</h2><h3 id="阿里云源"><a href="#阿里云源" class="headerlink" title="阿里云源"></a>阿里云源</h3><pre class=" language-bash"><code class="language-bash">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</code></pre>
<h3 id="清华源"><a href="#清华源" class="headerlink" title="清华源"></a>清华源</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse
<span class="token comment" spellcheck="true"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
<span class="token comment" spellcheck="true"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
<span class="token comment" spellcheck="true"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span>
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse
<span class="token comment" spellcheck="true"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span>

<span class="token comment" spellcheck="true"># 预发布软件源，不建议启用</span>
<span class="token comment" spellcheck="true"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span>
<span class="token comment" spellcheck="true"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span></code></pre>
<h3 id="中科大源"><a href="#中科大源" class="headerlink" title="中科大源"></a>中科大源</h3><pre class=" language-bash"><code class="language-bash">deb https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-updates main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-backports main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-security main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</code></pre>
<h3 id="网易163源"><a href="#网易163源" class="headerlink" title="网易163源"></a>网易163源</h3><pre class=" language-bash"><code class="language-bash">deb http://mirrors.163.com/ubuntu/ focal main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ focal-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ focal-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ focal-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ focal-backports main restricted universe multiverse</code></pre>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Willis</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://williscode.gitee.io/posts/8bff.html">https://williscode.gitee.io/posts/8bff.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://williscode.gitee.io" target="_blank">任求其</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/GEM_13.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/7613.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/20201031151929.JPG" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java之TCP笔记</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/Willis-zzx/PicGO/img/GEM_13.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Willis</div><div class="framework-info"><span>框架 </span><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener">Butterfly</a></div><div class="footer_custom_text">Hi,  welcome  to  my  <a href="https://williscode.gitee.io/">blog</a>!</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: 'GsSTvxIPt3sTGJNAbvTblKe2-gzGzoHsz',
      appKey: 's04X9XW5o8yBxNNkVKAwkxFq',
      placeholder: '记得留下你的昵称和邮箱....可以快速收到回复',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>